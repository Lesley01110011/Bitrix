# Структура проекта для интеграции с Bitrix

## Этап 3 - PHP 8.1+/8.2 для Bitrix

### Структура директорий:
```
local/
├── components/          # Компоненты Bitrix
│   ├── fastonline/     # Компоненты проекта
│   │   ├── catalog/    # Компонент каталога
│   │   ├── services/   # Компонент услуг
│   │   └── cart/       # Компонент корзины
├── templates/          # Шаблоны
│   └── pattern/        # Текущий шаблон
├── php_interface/      # PHP интерфейс
│   ├── init.php        # Инициализация
│   └── handlers/        # Обработчики событий
└── modules/            # Кастомные модули
    └── fastonline/     # Модуль проекта
```

### Требования:
- PHP 8.1+ или 8.2+
- PSR-12 стандарт кодирования
- ООП подход
- Обработка исключений
- Безопасность (валидация, санитизация)

## Этап 4 - Современное окружение

### Docker конфигурация:
- `docker-compose.yml` - конфигурация окружения
- `Dockerfile` - образ для разработки
- `.env` - переменные окружения

### BitrixVM:
- Конфигурация виртуальной машины
- Требования к серверу

## Этап 5 - Данные

### Инфоблоки:
- Структура инфоблоков для каталога
- Структура инфоблоков для услуг
- Структура инфоблоков для новостей

### HL-блоки:
- Заказы
- Корзина
- Пользовательские данные

### ORM D7:
- Модели данных
- Репозитории
- Сервисы

## Этап 6 - Компоненты

### Списки/деталки:
- `bitrix:catalog.list` - список товаров
- `bitrix:catalog.detail` - детальная страница
- `fastonline:services.list` - список услуг
- `fastonline:services.detail` - детальная страница услуги

### Фильтр:
- `fastonline:catalog.filter` - фильтр каталога
- AJAX фильтрация
- URL параметры

### Пагинация:
- `bitrix:system.pagenavigation`
- AJAX пагинация

## Этап 7 - Магазин (часть 1)

### Каталог:
- Компонент каталога товаров
- Категории товаров
- Фильтрация и сортировка

### Карточка:
- Детальная страница товара
- Изображения товара
- Характеристики
- Отзывы

### Корзина:
- Добавление в корзину
- Редактирование корзины
- Мини-корзина в header

## Этап 8 - Магазин (часть 2)

### D7-заказы:
- Создание заказа через D7 API
- Обработка заказа
- Статусы заказа

### Оплаты/доставки:
- Интеграция платежных систем
- Способы доставки
- Расчет стоимости доставки

### REST-ивенты:
- События для внешних систем
- Webhook'и
- API интеграции

## Этап 9 - Тесты, производительность, деплой

### Тесты:
- Unit тесты (PHPUnit)
- Интеграционные тесты
- E2E тесты

### Производительность:
- Кэширование
- Оптимизация запросов
- CDN настройка
- Минификация ресурсов

### Деплой:
- CI/CD pipeline
- Автоматическое развертывание
- Резервное копирование


